{"version":3,"file":"js/662.4c4cb70d.js","mappings":"skBASIA,EAAAA,EAAAA,KAAc,KACVC,GAAmB,IAGvB,MAAMC,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAERC,EAAW,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAC/HC,EAAa,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,MAEvCC,EAAK,GACLC,EAAK,GAELC,EAAWV,EAAMW,OAAOD,SAASE,UAAU,EAAE,GAAG,IAAIZ,EAAMW,OAAOD,SAASE,UAAU,EAAE,GAAG,IAAIZ,EAAMW,OAAOD,SAASE,UAAU,EAAE,GAE/HC,GAAWC,EAAAA,EAAAA,IAAI,IAEff,EAAoBgB,gBAChBC,EAAAA,EAAMC,KAAK,qBAAqB,CAACP,SAASV,EAAMW,OAAOD,WAC5DQ,MAAMC,IACHC,QAAQC,IAAI,OAAOF,EAAIG,MACvBT,EAASU,MAAQJ,EAAIG,KAAKE,YAE1BL,EAAIG,KAAKE,YAAYC,KAAI,SAASC,GAC9BlB,EAAGmB,KAAKD,EAAIE,IACZnB,EAAGkB,KAAKD,EAAIG,GAChB,IACAT,QAAQC,IAAIR,EAAS,IAExBiB,OAAOX,IACLC,QAAQW,MAAM,KAAMZ,EAAI,GACzB,EAGAa,EAAkBC,IACpBpB,EAASU,MAAMW,OAAOD,EAAM,EAAE,EAG5BE,EAAcA,KACjB,IAAIC,EAAWvB,EAASU,MAAMc,OAC7BxB,EAASU,MAAMI,KAAK,CAACC,GAAG,GAAIC,GAAG,GAAIS,SAAS,GAAIC,SAASvC,EAAMW,OAAOD,WACtEU,QAAQC,IAAIe,EAAS,EAGnBI,EAAgBA,KAElB,IAAM,IAAIC,EAAI,EAAIA,EAAI5B,EAASU,MAAMc,OAAQI,IAAK,CAC9C,IAAIf,EAAMb,EAASU,MAAMkB,GACzB,GAAa,IAAVf,EAAIE,GAEH,OADAc,MAAM,aACC,EAEX,GAAa,IAAVhB,EAAIG,GAEH,OADAa,MAAM,YACC,EAEX,GAAmB,IAAhBhB,EAAIY,SAEH,OADAI,MAAM,aACC,CAEf,CAEAtC,EAAMuC,OAAO,uBAAuB,GACpC3B,EAAAA,EAAMC,KAAK,qBAAqB,CAACP,SAASV,EAAMW,OAAOD,SAASkC,aAAaC,KAAKC,UAAUjC,EAASU,SACpGL,MAAMC,IACHC,QAAQC,IAAI,OAAOF,EAAIG,MACC,SAArBH,EAAIG,KAAKyB,SACRL,MAAM,SACNxC,EAAO8C,IAAI,IAEXN,MAAMvB,EAAIG,KAAK2B,OACnB,IAEHnB,OAAOX,IACLC,QAAQW,MAAM,KAAMZ,EAAI,IAE3Bf,EAAMuC,OAAO,uBAAuB,EAAM,EAGxCO,EAAUA,KACZhD,EAAO8C,IAAI,EAAE,EAQXG,EAAYA,CAACC,EAAMC,KACrBxC,EAASU,MAAM8B,GAAaD,EAAME,OAAOC,MAAMH,EAAME,OAAO/B,KAAK,E,8sCChGzE,MAAMiC,EAAc,EAEpB,O","sources":["webpack://vue_test/./src/views/schedule/scheduleEdit.vue","webpack://vue_test/./src/views/schedule/scheduleEdit.vue?1270"],"sourcesContent":["<script setup>\r\nimport BaseHeader from '@/components/common/header/baseHeader.vue'\r\nimport BaseFooter from '@/components/common/footer/baseFooter.vue'\r\nimport axios from \"axios\";\r\nimport { ref, onBeforeMount } from 'vue';\r\n\r\nimport { useRoute,useRouter } from 'vue-router'\r\nimport { useStore } from \"vuex\";\r\n\r\n    onBeforeMount(() => {\r\n        getScheduleOneDay();\r\n    });\r\n\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const store = useStore();\r\n\r\n    const timeList = ['00','01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23'];\r\n    const minuteList = ['00','10','20','30','40','50'];\r\n\r\n    const hh = [];\r\n    const mm = [];\r\n\r\n    const yyyymmdd = route.params.yyyymmdd.substring(0,4)+'-'+route.params.yyyymmdd.substring(4,6)+'-'+route.params.yyyymmdd.substring(6,8);\r\n    \r\n    const weekLoop = ref([]);\r\n\r\n    const getScheduleOneDay = async () => {\r\n        await axios.post(\"/scheduleOneDay.do\",{yyyymmdd:route.params.yyyymmdd})\r\n        .then((res) => {\r\n            console.log('조회결과',res.data);\r\n            weekLoop.value = res.data.RESULT_LIST;\r\n\r\n            res.data.RESULT_LIST.map(function(row) {\r\n                hh.push(row.HH);\r\n                mm.push(row.MM);\r\n            });\r\n            console.log(weekLoop)\r\n        })\r\n        .catch((res) => {\r\n           console.error(\"에러\", res);\r\n        });\r\n    }\r\n\r\n    const deleteSchedule = (index) => {\r\n        weekLoop.value.splice(index,1);\r\n    }\r\n\r\n    const addSchedule = () => {\r\n       let arrayCnt = weekLoop.value.length;\r\n        weekLoop.value.push({HH:'', MM:'', SCHEDULE:'', YYYYMMDD:route.params.yyyymmdd});\r\n        console.log(arrayCnt);\r\n    }\r\n    \r\n    const updateSchedule =() =>{\r\n\r\n        for ( let i = 0 ; i < weekLoop.value.length; i++) {\r\n            let row = weekLoop.value[i];\r\n            if(row.HH == '') {\r\n                alert('시간값이 비었어');\r\n                return false;\r\n            }\r\n            if(row.MM == '') {\r\n                alert('분값이 비었어');\r\n                return false;\r\n            }\r\n            if(row.SCHEDULE == '') {\r\n                alert('스케쥴이 비었어');\r\n                return false;\r\n            }\r\n        }\r\n\r\n        store.commit(\"changeLoadingStatus\", true);\r\n        axios.post(\"/scheduleUpdate.do\",{yyyymmdd:route.params.yyyymmdd,scheduleList:JSON.stringify(weekLoop.value)})\r\n        .then((res) => {\r\n            console.log('조회결과',res.data);\r\n            if(res.data.RESCODE === '0000') {\r\n                alert('수정 성공');\r\n                router.go(-1);        \r\n            } else {\r\n                alert(res.data.RESMSG);\r\n            }\r\n        })\r\n        .catch((res) => {\r\n           console.error(\"에러\", res);\r\n        });\r\n        store.commit(\"changeLoadingStatus\", false);\r\n    }\r\n\r\n    const moveList =() =>{\r\n        router.go(-1);\r\n    }\r\n\r\n    /**\r\n     * change event가 일어난 값 수정\r\n     * @param {$event} event \r\n     * @param {loop index} evtRowIndex \r\n     */\r\n    const changeData= (event,evtRowIndex) => {\r\n        weekLoop.value[evtRowIndex][event.target.name]=event.target.value;\r\n    }\r\n</script>\r\n\r\n<template>\r\n<BaseHeader title=\"스케쥴갱신\"></BaseHeader>\r\n    <main>\r\n        <div>\r\n            <span>날짜</span>\r\n            <span>{{ yyyymmdd }}</span>\r\n        </div>\r\n        <div>\r\n        <template v-for=\"(rowData, index) in weekLoop\" v-bind:key=\"index\">\r\n            <div>\r\n                <span>시간</span>\r\n                <span>\r\n                    <select v-model=\"hh[index]\" name=\"HH\" @change=\"changeData($event,index)\">\r\n                        <option v-for=\"option in timeList\" :value=\"option\" :key=\"option\">\r\n                            {{ option }}시\r\n                        </option>\r\n                    </select>\r\n                    :\r\n                    <select v-model=\"mm[index]\" name=\"MM\" @change=\"changeData($event,index)\">\r\n                        <option v-for=\"option in minuteList\" :value=\"option\" :key=\"option\">\r\n                            {{ option }}분\r\n                        </option>\r\n                    </select>\r\n                </span>\r\n            </div>\r\n            <div>\r\n                <span>내용</span>\r\n                <input @input=\"changeData($event,index)\" name=\"SCHEDULE\" :value=\"rowData.SCHEDULE\" />\r\n                <button type=\"button\" title=\"삭제\" @click=\"deleteSchedule(index)\">삭제</button>\r\n            </div>\r\n            <div style=\"padding: 10px;\"></div>\r\n        </template>\r\n        </div>\r\n        <div style=\"text-align: right;\">\r\n            <button type=\"button\" title=\"수정\" @click=\"addSchedule\">추가</button>\r\n            <button type=\"button\" title=\"수정\" @click=\"updateSchedule\">저장</button>\r\n            <button type=\"button\" title=\"목록\" @click=\"moveList\">목록</button>\r\n        </div>\r\n    </main>\r\n<BaseFooter></BaseFooter>\r\n</template>\r\n","import script from \"./scheduleEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./scheduleEdit.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["onBeforeMount","getScheduleOneDay","route","useRoute","router","useRouter","store","useStore","timeList","minuteList","hh","mm","yyyymmdd","params","substring","weekLoop","ref","async","axios","post","then","res","console","log","data","value","RESULT_LIST","map","row","push","HH","MM","catch","error","deleteSchedule","index","splice","addSchedule","arrayCnt","length","SCHEDULE","YYYYMMDD","updateSchedule","i","alert","commit","scheduleList","JSON","stringify","RESCODE","go","RESMSG","moveList","changeData","event","evtRowIndex","target","name","__exports__"],"sourceRoot":""}